import{n as D,l as L,r as n,R as A,z as p,j as e,m as d,L as y,t as T,x as z,A as B,y as H}from"./index-DyAsnBHk.js";const O=()=>{const i=D(),{tempEmail:u,resetPassword:j,clearTempData:x}=L(),[r,N]=n.useState("input"),[g,b]=n.useState(!1),[c,w]=n.useState(["","","","","",""]),[m,v]=n.useState(""),[f,o]=n.useState(""),l=Array(6).fill(0).map(()=>A.createRef());n.useEffect(()=>{if(!u){i("/forgot-password"),p.error("Please submit your email first");return}l[0].current&&l[0].current.focus()},[u,i]),n.useEffect(()=>{if(r==="success"){const s=setTimeout(()=>{x(),i("/signin")},2e3);return()=>clearTimeout(s)}},[r,i,x]);const P=(s,t)=>{if(t&&!/^\d+$/.test(t))return;const a=[...c];a[s]=t,w(a),t&&s<5&&l[s+1].current.focus()},R=(s,t)=>{t.key==="Backspace"&&!c[s]&&s>0&&l[s-1].current.focus()},k=s=>{s.preventDefault();const t=s.clipboardData.getData("text").trim();if(/^\d{6}$/.test(t)){const a=t.split("");w(a),l[5].current.focus()}},F=()=>{if(c.join("").length!==6)return o("Please enter all 6 digits of the verification code"),!1;if(m){if(m.length<8)return o("Password must be at least 8 characters"),!1}else return o("Password is required"),!1;return o(""),!0},S=s=>{v(s.target.value),f&&o("")},C=async s=>{var t,a;if(s.preventDefault(),!!F()){b(!0);try{const h=c.join("");await j(m,h),N("success"),p.success("Password reset successfully. Redirecting to sign in..."),i("/signin")}catch(h){p.error(((a=(t=h.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to reset password")}finally{b(!1)}}},E=()=>{x(),i("/signin")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black flex items-center justify-center px-4 py-16",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs(d.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-8",children:[e.jsx(y,{to:"/",className:"inline-block mb-6",children:e.jsx("img",{src:"/Logo.png",alt:"FuelUp",className:"h-12"})}),e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:[r==="input"&&"Reset Password",r==="success"&&"Password Reset"]}),e.jsxs("p",{className:"text-gray-400",children:[r==="input"&&`Enter the verification code sent to ${u} and your new password`,r==="success"&&"Your password has been reset successfully! Redirecting to sign in..."]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-gray-800/40 backdrop-blur-md rounded-2xl p-8 shadow-xl border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-emerald-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold",children:"1"}),e.jsx("span",{className:"text-xs text-emerald-500 mt-1",children:"Email"})]}),e.jsx("div",{className:"flex-1 h-1 bg-emerald-500 mx-2"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-emerald-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold",children:"2"}),e.jsx("span",{className:"text-xs text-emerald-500 mt-1",children:"Reset"})]})]}),r==="input"&&e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-4 text-center",children:"Enter 6-digit verification code"}),e.jsx("div",{className:"flex gap-2 justify-center",onPaste:k,children:c.map((s,t)=>e.jsx("input",{ref:l[t],type:"text",maxLength:1,value:s,onChange:a=>P(t,a.target.value),onKeyDown:a=>R(t,a),className:"w-12 h-12 text-center text-xl font-bold bg-gray-900/60 border border-gray-700 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white"},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(T,{className:"text-gray-500"})}),e.jsx("input",{id:"password",type:"password",value:m,onChange:S,required:!0,className:"w-full bg-gray-900/60 border border-gray-700 pl-10 pr-4 py-3 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-white placeholder-gray-500 transition-all duration-300",placeholder:"••••••••"})]})]}),f&&e.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700 rounded-lg text-red-400 text-sm",children:f}),e.jsx(d.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-300 flex items-center justify-center",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting..."]}):e.jsxs(e.Fragment,{children:["Reset Password",e.jsx(z,{className:"ml-2"})]})})]}),r==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-emerald-500/20 rounded-full flex items-center justify-center",children:e.jsx(B,{className:"text-emerald-500 text-4xl"})})}),e.jsx("p",{className:"text-gray-300 mb-8",children:"Your password has been reset successfully. You will be redirected to sign in shortly."}),e.jsx(d.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:E,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-300",children:"Sign In Now"})]})]}),r==="input"&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:"text-center mt-6",children:e.jsxs(y,{to:"/signin",className:"text-emerald-400 hover:text-emerald-300 font-medium transition-colors inline-flex items-center",children:[e.jsx(H,{className:"mr-2"}),"Back to Sign In"]})})]})})};export{O as default};
